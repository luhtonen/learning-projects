@(title: String, nick: String)(implicit request: RequestHeader)

@main(title) {
  <h2>Chatroom - You are @nick</h2>
  <form id="chatform">
    <input id="text" placeholder="Say something...">
    <button type="submit" class="btn btn-info"></button>
  </form>
  <ul id="messages"></ul>

  <script type="text/javascript">
    $(function() {
      ws = new WebSocket("@routes.Chat.chatSocket(nick).webSocketURL()");
      ws.onmessage = function(msg) {
        $('<li/>').text(msg.data).appendTo('#messages')
      };

      $('#chatform').submit(function() {
        ws.send($('#text').val());
        $('#text').val("").focus();
        return false;
      });
    })
  </script>
}